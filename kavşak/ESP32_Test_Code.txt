ESP32 WiFi/HTTP GPS Test Kodu
==============================

Bu kodu ESP32'na yÃ¼kle ve test et:

```arduino
#include <WiFi.h>
#include <WebServer.h>

// WiFi ayarlarÄ±
const char* ssid = "WIFI_ADI";      // WiFi aÄŸ adÄ±n
const char* password = "WIFI_SIFRESI"; // WiFi ÅŸifren

// LED ve buzzer pinleri
#define LED_PIN 2      // Trafik Ä±ÅŸÄ±ÄŸÄ± sinyali iÃ§in LED
#define BUZZER_PIN 4   // Ambulans geÃ§iÅŸ sinyali iÃ§in buzzer

WebServer server(80);

// Test GPS koordinatlarÄ± (Ä°stanbul)
float test_lat = 41.0082;
float test_lon = 28.9784;

void setup() {
  Serial.begin(115200);
  
  // Pin ayarlarÄ±
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  
  // WiFi baÄŸlantÄ±sÄ±
  WiFi.begin(ssid, password);
  Serial.print("WiFi'ye baÄŸlanÄ±yor");
  
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  
  Serial.println();
  Serial.print("WiFi baÄŸlandÄ±! IP: ");
  Serial.println(WiFi.localIP());
  
  // HTTP endpoint'leri
  server.on("/gps", handleGPS);
  server.on("/status", handleStatus);
  server.on("/led_on", handleLedOn);
  server.on("/led_off", handleLedOff);
  server.on("/buzzer", handleBuzzer);
  
  server.begin();
  Serial.println("HTTP server baÅŸlatÄ±ldÄ±!");
  Serial.println("Test URL'leri:");
  Serial.println("http://" + WiFi.localIP().toString() + "/gps");
  Serial.println("http://" + WiFi.localIP().toString() + "/status");
}

void loop() {
  server.handleClient();
  
  // GPS koordinatlarÄ±nÄ± biraz deÄŸiÅŸtir (test iÃ§in)
  test_lat += 0.0001;
  test_lon += 0.0001;
  
  delay(1000);
}

void handleGPS() {
  String json = "{";
  json += "\"latitude\":" + String(test_lat, 6) + ",";
  json += "\"longitude\":" + String(test_lon, 6) + ",";
  json += "\"valid\":true,";
  json += "\"timestamp\":\"2024-01-20T10:30:00Z\"";
  json += "}";
  
  server.send(200, "application/json", json);
  Serial.println("GPS data sent: " + json);
}

void handleStatus() {
  String json = "{";
  json += "\"device\":\"ESP32_GPS\",";
  json += "\"ip\":\"" + WiFi.localIP().toString() + "\",";
  json += "\"status\":\"online\",";
  json += "\"uptime\":" + String(millis()) + "";
  json += "}";
  
  server.send(200, "application/json", json);
  Serial.println("Status sent");
}

void handleLedOn() {
  digitalWrite(LED_PIN, HIGH);
  server.send(200, "text/plain", "LED ON");
  Serial.println("ðŸ”´ LED AÃ‡ILDI - Trafik Ä±ÅŸÄ±ÄŸÄ± sinyali!");
}

void handleLedOff() {
  digitalWrite(LED_PIN, LOW);
  server.send(200, "text/plain", "LED OFF");
  Serial.println("âšª LED KAPANDI - Normal trafik");
}

void handleBuzzer() {
  digitalWrite(BUZZER_PIN, HIGH);
  delay(500);
  digitalWrite(BUZZER_PIN, LOW);
  server.send(200, "text/plain", "BUZZER ACTIVATED");
  Serial.println("ðŸ”Š BUZZER - Ambulans geÃ§iÅŸ sinyali!");
}
```

KULLANIM:
1. Bu kodu ESP32'na yÃ¼kle
2. Serial Monitor'den IP adresini not al
3. Python kodunda bu IP'yi kullan:
   python runner.py --gps-source esp32 --esp32-ip [ESP32_IP]
